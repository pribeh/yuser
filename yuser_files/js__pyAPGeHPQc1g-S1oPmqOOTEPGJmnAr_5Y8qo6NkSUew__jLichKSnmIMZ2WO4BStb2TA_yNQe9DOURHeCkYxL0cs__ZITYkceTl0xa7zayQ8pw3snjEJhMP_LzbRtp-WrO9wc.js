/* Source and licensing information for the line(s) below can be found at http://localhost:8888/pmf/sites/all/modules/authcache/modules/authcache_debug/authcache_debug.js. */
(function(Drupal,$){"use strict";var ajaxCount=0,timeStart=new Date().getTime(),cacheRenderTime=null,status={'Cache Status':'Debug info pending'},info={}
function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n)}
function widget(){$("body").prepend("<div id='authcachedbg' style='max-width: 80em;'><div id='authcache_status_indicator'></div><strong><a href='#' id='authcachehide'>Authcache Debug</a></strong><div id='authcachedebug' style='display:none;'><div id='authcachedebuginfo'></div></div></div>");$("#authcachehide").click(function(){$("#authcachedebug").toggle();return false});if($.cookie("Drupal.authcache.cache_render")&&$.cookie("Drupal.authcache.cache_render")!=="get")cacheRenderTime=$.cookie("Drupal.authcache.cache_render");updateInfoFieldset();debugTimer()}
function updateInfoFieldset(){var alertColor=null;if(info.cacheStatus){status['Cache Status']=info.cacheStatus;if(info.cacheStatus==='HIT'){alertColor='green'}else if(info.cacheStatus==='MISS'){alertColor='orange'}else alertColor='red'};if(info.messages)$.each(info.messages,function(idx,msg){status['Message '+(idx+1)]=msg.label+': '+msg.message});if(info.pageRender)status["Page Render Time"]=info.pageRender+" ms";if(info.cacheStatus==='HIT'&&cacheRenderTime!==null){status["Cache Render Time"]=cacheRenderTime;if(isNumeric(cacheRenderTime)){status["Cache Render Time"]+=" ms";if(cacheRenderTime>30){alertColor='orange'}else if(cacheRenderTime>100)alertColor='red'}};if(isNumeric(cacheRenderTime))status.Speedup=Math.round((info.pageRender-cacheRenderTime)/cacheRenderTime*100).toString().replace(/(\d+)(\d{3})/,'$1,$2')+"% increase";if(info.cacheTime)status["Page Age"]=Math.round(timeStart/1e3-info.cacheTime)+" seconds";if(alertColor!==null)$("#authcache_status_indicator").css({background:alertColor});$("#authcachedebuginfo").first().html(debugFieldset("Status",status));$("#authcachedebuginfo").first().append(debugFieldset("Settings",info))}
function debugTimer(){var timeMs=new Date().getTime()-timeStart;$("#authcachedebug").append("HTML/JavaScript time: "+timeMs+" ms <hr size=1>")}
function debugFieldset(title,jsonData){var fieldset='<div style="clear:both;"></div><fieldset style="float:left;min-width:240px;"><legend>'+title+'</legend>';$.each(jsonData,function(key,value){if(key[0]!==key[0].toLowerCase())fieldset+="<strong>"+key+"</strong>: "+JSON.stringify(value)+'<br>'});fieldset+='</fieldset><div style="clear:both;">';return fieldset}
function isEnabled(settings){return(settings.authcacheDebug&&($.cookie('Drupal.authcache.aucdbg')!==null||settings.authcacheDebug.all)&&typeof JSON==='object')};Drupal.behaviors.authcacheDebug={attach:function(context,settings){$('body').once('authcache-debug',function(){if(!isEnabled(settings))return;widget();$.get(settings.authcacheDebug.url,function(data){info=$.extend(info,data);updateInfoFieldset();$.authcache_cookie("Drupal.authcache.aucdbg",Math.floor(Math.random()*65535).toString(16))})})}};$(window).load(function(){if(isEnabled(Drupal.settings))$.authcache_cookie("Drupal.authcache.cache_render","get")})}(Drupal,jQuery));;
/* Source and licensing information for the above line(s) can be found at http://localhost:8888/pmf/sites/all/modules/authcache/modules/authcache_debug/authcache_debug.js. */
